 IF @OperationType = 'INSERT' OR @OperationType = 'UPDATE'
        BEGIN
            IF EXISTS (SELECT 1 FROM Users WHERE Username = @Username AND (@OperationType = 'INSERT' OR (User_Id <> @User_Id)))
            BEGIN
                SET @Error_Message = 'Username already exists!';
                ROLLBACK; -- Rollback the transaction in case of an error
                RETURN;
            END
        END
